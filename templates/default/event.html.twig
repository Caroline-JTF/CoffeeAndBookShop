{# ======================================== #}
{# ================ EXTENDS =============== #}
{# ======================================== #}

{% extends "base.html.twig" %}

{# ======================================== #}
{# ================= STYLE ================ #}
{# ======================================== #}

{% block stylesheets %}
    <link rel="stylesheet" href="assets/css/default/event.css">
{% endblock %}

{# ======================================== #}
{# ================= TITLE ================ #}
{# ======================================== #}

{% block title %}Nos évènements{% endblock %}


{# ======================================== #}
{# ================== BODY ================ #}
{# ======================================== #}

{% block body %}

    {# ======================================== #}
    {# ================ FLASHES =============== #}
    {# ======================================== #}

    <div class="login-anim">
        {% for message in app.flashes('success') %}
            <div class="flash successFlash">{{message}}</div>
        {% endfor %}
        {% for message in app.flashes('error') %}
            <div class="flash errorFlash">{{message}}</div>
        {% endfor %}
    </div>

    {# ======================================== #}
    {# ================ HEADING =============== #}
    {# ======================================== #}

    <section class="heading">
        <p>What's happening here?</p>
        <h2>Participer à un de nos évènements</h2>
        <p>Dégustation de nouveaux grains, dédicaces, ...</p> 
    </section>

    {# ======================================== #}
    {# ================ EVENTS ================ #}
    {# ======================================== #}

    <section class="container-event">

        {% for event in events | reverse %}

            <div class="event">

                <div class="card-event">

                    <div class="img-event">
                        <img src="{{ asset('/uploads/' ~ event.img) }}" alt="{{ event.name }}" width="500" height="500"  onerror="this.style.display='none';"/>
                    </div>

                    <div class="detail-event">
                        <div class="heading">
                            <h2>{{ event.name}}</h2>
                            <p>Aura lieu le : {{ event.date | date('d/m/Y') }}</p>
                        </div>

                        <div class="text-event">
                            <p>{{ event.description}}</p>
                        </div>

                        <div class="footer-event">
                            <p>Place disponible : {{ event.place}}</p>
                            <p>Participant inscrit : {{ event.participants}}</p>
                            <div>
                                {% if event.status == 'Ouvert' %}
                                    <div class="circle circleGreen"></div>
                                    {% elseif event.status == 'Annulé'%}
                                        <div class="circle circleRed"></div>
                                    {% else %}
                                        <div class="circle circleDark"></div>
                                {% endif %}

                                <p>{{ event.status }}</p>
                            </div>
                        </div>

                        {% if event.status == 'Ouvert' %}
                            <button>
                                <a href="{{ path('app_user_participant', {'id': event.id}) }}">
                                    S'inscrire
                                </a>
                            </button>
                        {% endif %}

                    </div>{# DETAIL EVENT #}

                </div>{# END CARD EVENT #}

            </div>{# END EVENT #}

            {% else %}  
                <p class="else">Il n'y a pas encore d'évènement</p>

        {% endfor %}

    </section>{# END CONTAINER EVENT #}

{% endblock %}

